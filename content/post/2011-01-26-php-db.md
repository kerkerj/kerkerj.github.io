---
title: '[PHP] 簡單的資料庫連結'
description: "以兩個 PHP 檔案分工連接 MySQL 資料庫：connectDB.inc.php 設定連線參數，test.php 查詢並顯示資料，PHP 初學者入門範例。"
date: 2011-01-26
categories: ['PHP']
---


我是 PHP 新手，超級嫩，所以就寫寫簡單的東西，今天來寫關於資料庫的連結。  
環境同之前寫的，就是 FreeBSD、MySQL、phpMyadmin 啦~  

我將他分成兩個檔案來寫：  
一個是負責連結資料庫：`connectDB.inc.php`  
另一個則是測試的 php ：`test.php`  

在 `connectDB.inc.php` 中設定好 SQL 主機的 IP、使用者名稱密碼等等資料，  
然後由 `test.php` 來呈現資料，直接看 code 最快：  

connectDB.inc.php

```php 
<?php 
	$cfgDB_HOST = "localhost";		//主機名稱或ip位址
  $cfgDB_PORT = "80";						//主機開放連線的port
	$cfgDB_USERNAME = "account";	//登入主機帳號
	$cfgDB_PASSWORD = "password";	//登入主機密碼
	$cfgDB_NAME = "db_name";			//資料庫名稱
  
  //建立資料庫連線
  $link = mysql_connect($cfgDB_HOST . ":" . $cfgDB_PORT, $cfgDB_USERNAME, $cfgDB_PASSWORD) or die("Could not connect MySQL");
  //選擇資料庫
  mysql_select_db($cfgDB_NAME, $link) or die("Could not select database");
  //讓中文正常顯示
  mysql_query("SET NAMES 'utf8'");
  
?>
```

test.php

```php 
<?php 
   	include ("connectDB.inc.php");
    try{
    	$sql="SELECT * from test";	//給予SQL指令
      $result=mysql_query($sql) or die("invalid query");//傳給MySQL指令
      //將所有資料顯示出來
      while($record=mysql_fetch_array($result)){
      	echo "id: $record[0]<br>";						//第一種讀取資料庫欄位的方法，使用欄位序號
        echo "name: ".$record["test_string"]."<br>";	//第二種讀取資料庫欄位方法，使用欄位名稱
    	}
      mysql_close($link);
    } catch(Exception $e){
    	echo $e;
    }
?>
```

若資料庫有資料就可以正確顯示溜

