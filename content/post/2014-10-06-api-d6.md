---
title: "[API-d6] - [Server 番外篇] 建立自己的本機虛擬伺服器 2 - Ubuntu 基本設定與安裝 Node.js, MongoDB"
description: "鐵人賽 RESTful API Day6：在 Vagrant Ubuntu 上設定時區、安裝 build-essential 基本套件、Node.js 和 MongoDB，含服務啟停指令。"
date: 2014-10-06
slug: api-d6
tags: ['鐵人賽', 'restful', 'api']
---


# [Server 番外篇] 建立自己的本機虛擬伺服器 2 - Ubuntu 基本設定與安裝 Node.js, MongoDB 

嗨又到了 Server 時間了!

接下來我們都會做一些指令操作， 

如果進一步有興趣的可以 Google 鳥哥的私房菜，

完整的 Linux 操作教學，淺顯易懂，想學習操作 linux OS 的話必看！  

今天我們要稍稍整理一下昨天剛安裝完的 Ubuntu 作業系統，以及安裝一些我們需要用到的東西  

首先我們的第一步就是先開啟終端機，到昨天放 Vagrantfile 的資料夾:

```
$ cd ~/ithome/
```

開啟 Ubuntu 

```
$ vagrant up
```

順帶一提，有時候開機時可能會卡在一個地方：

```
default: Warning: Connection timeout. Retrying...
default: Warning: Connection timeout. Retrying...
default: Warning: Connection timeout. Retrying...
```

這個就稍微等一下吧~ 如果電腦性能比較差的話可能會卡比較久，不過應該不至於會卡超過 10 分鐘

如果卡超過十分鐘可能要強制中斷，並且尋找解決辦法了～

開機完成後就登入吧! 

```
$ vagrant ssh
...
vagrant@vagrant-ubuntu-trusty-64:~$
```

## Ubuntu 套件, 設定時區

今天就要來幫 Ubuntu 安裝一些東西， 

首先先產生 locale file for zh_TW

```
$ sudo locale-gen zh_TW.UTF-8
```

更新檔案清單並安裝更新, 移除更新後不需要的套件: 

```
$ sudo apt-get update && sudo apt-get -y upgrade
$ sudo apt-get -y autoremove
```

再來是安裝一些常用的套件 如 git, curl, vim 等等:

```
$ sudo apt-get -y install build-essential vim git-core curl autoconf libssl-dev
```

設定時區, 照著指令選就好了~

```
$ sudo dpkg-reconfigure tzdata
...

// 選擇完畢後, 輸入 date 指令來查詢伺服器時間
$ date
Sat Oct  6 20:47:03 CST 2014
```

## Node.js 安裝

我們使用了 ppa 以安裝最新的 Node.js 版本:

```
// 加入 ppa
$ sudo add-apt-repository ppa:chris-lea/node.js
 Evented I/O for V8 javascript. Node's goal is to provide an easy way to build scalable network programs
 More info: https://launchpad.net/~chris-lea/+archive/ubuntu/node.js
Press [ENTER] to continue or ctrl-c to cancel adding it
(要再按一下 enter)

// 因為加入新的檔案清單來源了，所以重新更新 ubuntu 的檔案清單
$ sudo apt-get update

// 安裝 nodejs
$ sudo apt-get -y install nodejs
```

這樣就完成安裝了! 

確認一下版本是否安裝成功:

```
$ node -v 
v0.10.32 

$ npm -v 
1.4.28
```

ya! 這樣 Ubuntu 就有 node.js 了! 


## MongoDB

再來就是要安裝 MongoDB 了!

我們參考 MongoDB [官方網站的文件](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)


```
//加入 apt-key
$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10


// 新增一個來源清單，並將 mongodb 的來源寫進該來源清單
$ echo 'deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen' | sudo tee /etc/apt/sources.list.d/mongodb.list

// 重新更新來源清單
$ sudo apt-get update

// 安裝 mongodb
$ sudo apt-get install -y mongodb-org
```

安裝完成後 Mongo db 就會跑起來了，從以下指令可以得知 

```
$ ps aux | grep mongo
```

順便確認一下版本: 

```
$ mongod --version
db version v2.6.4
2014-10-04T06:31:01.553+0000 git version: 3a830be0eb92d772aa855ebb711ac91d658ee910

$ mongo --version
MongoDB shell version: 2.6.4
```

MongoDB 除了安裝了 DB 本身，還提供了指令提供操作，稱之為 MongoDB Shell， 

方便我們使用 Shell 進去 DB 裡面做 DB 操作  

以下是 mongodb service 的指令: 

```
// 開啟 mongodb
$ sudo service mongod start

// 關閉 mongodb
$ sudo service mongod stop

// 重啟 mongodb
$ sudo service mongod restart
```

好啦~ 今天就先到這，記得把虛擬機器關起來~ 
