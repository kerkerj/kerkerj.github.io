<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://kerkerj.github.io/">
    <meta property="og:title" content="kerkerj">
    
    <meta property="og:description" content="hugo hugo - 快速又現代的靜態網站產生器 ^^^ 這是 spf13 自己說的 繼 spf13-vim 後又一個 spf13 出品的好東西 XD 在靜態網站產生器中最廣為人知的應該就是 Jekyll 以及基於 Jekyll 的 Octopress 了 (關於靜態網站產生器，這篇文章 介紹了六個除了 Jekyll 以外的產生器) 為什麼要用 hugo？ 雖然 Jekyll / Octopress 很紅資源多主題也不少 但是缺點就是要使用它們就必須裝 ruby、裝 gem 有在寫 ruby 的人感覺應該還好 沒在寫 ruby 的光想像就覺得應該會被搞死&hellip; XD 而且覺得文章一多時在編譯的時候好慢&hellip; 用 hugo 的好處就是因為他是用 go 寫的 執行速度飛快，而且只要下載一個 binary 檔案後就可以操作了喲~ 基本 hugo 安裝與操作 首先先安裝 hugo (我是用 mac 的 homebrew) $ brew install hugo 使用 hugo 產生一個新的網站 $ hugo new site /path/to/the/site e.g.">
    
    
    
    <meta property="og:site_name" content="kerkerj">

    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="kerkerj" />
    <meta name="twitter:title" content="kerkerj &middot; kerkerj">
    <meta name="twitter:description" content="Hi.">

    
    <title>kerkerj &middot; kerkerj</title>

    
    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    
    
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
    

    <link rel="stylesheet" href="http://kerkerj.github.io//css/all.min.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    
    
      <link rel="stylesheet" href="http://kerkerj.github.io//css/highlight/railscasts.css">
    

    
    <link href="http://kerkerj.github.io/favicon.ico" rel="icon">

    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://kerkerj.github.io//index.xml">
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="http://kerkerj.github.io/">kerkerj</a></h1>
            <h2 class="brand-tagline"> Hi. </h2>
        </hgroup>

        <nav class="nav">
            
            <ul class="pure-menu-list">
              
              
                <li class="pure-menu-link">
                  <a href="http://kerkerj.github.io//notes/">Notes</a>
                </li>
              
                <li class="pure-menu-link">
                  <a href="http://kerkerj.github.io//about/">About</a>
                </li>
              
                <li class="pure-menu-link">
                  <a href="http://kerkerj.github.io//mac-app-list/">Mac App List</a>
                </li>
              
            </ul>

            
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="http://twitter.com/kerkerj"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="http://github.com/kerkerj "><i class="fa fa-github-alt"></i> Github</a>
                </li>
                
                
                
                <li class="nav-item">
                    <a class="pure-button" href="http://kerkerj.github.io/index.xml"><i class="fa fa-rss-alt"></i> RSS</a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/18/2014-10-18-api-d18/" class="post-title">[API-d18] - 實戰開發 - 套件模組</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-restful" href="http://kerkerj.github.io//categories/restful">restful</a><a class="post-category post-category-api" href="http://kerkerj.github.io//categories/api">api</a><a class="post-category post-category-nodejs" href="http://kerkerj.github.io//categories/nodejs">nodejs</a><a class="post-category post-category-express" href="http://kerkerj.github.io//categories/express">express</a><a class="post-category post-category-npm" href="http://kerkerj.github.io//categories/npm">npm</a><a class="post-category post-category-mongodb" href="http://kerkerj.github.io//categories/mongodb">mongodb</a><a class="post-category post-category-mongoose" href="http://kerkerj.github.io//categories/mongoose">mongoose</a><a class="post-category post-category-mocha superagent" href="http://kerkerj.github.io//categories/mocha-superagent">mocha superagent</a><a class="post-category post-category-validator" href="http://kerkerj.github.io//categories/validator">validator</a><a class="post-category post-category-expect.js" href="http://kerkerj.github.io//categories/expect.js">expect.js</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>##會使用到的套件:</p>

<pre><code>主體:
express - web framework
body-parser - parse request body

測試相關:
mocha - test framework
mocha-mongoose - 用來和 mocha 和 mongoose 中間做介接的套件
superagent - 拿它來丟 http request
validator - 用來驗證某個物件是否為某個型別
expect.js - 類似 BDD 的語法，用來寫測試的
debug - debug package

DB 相關:
mongoose - mongodb orm
mongodb - mongodb native driver

開發相關:
nodemon - detect file change and restart server

生產環境相關:
log4js - 記錄 request log
</code></pre>

<p>這是我的 package.json, 可以複製到專案目錄，然後下 <code>npm install</code></p>

<pre><code>{
  &quot;name&quot;: &quot;TODOAPI&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;app.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node ./bin/server.js env=development&quot;,
    &quot;test&quot;: &quot;./node_modules/mocha/bin/mocha&quot;,
    &quot;test-detail&quot;: &quot;./node_modules/mocha/bin/mocha --reporter list&quot;,
    &quot;stop&quot;: &quot;pkill -lf server.js&quot;
  },
  &quot;author&quot;: &quot;kerkerj&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;dependencies&quot;: {
    &quot;body-parser&quot;: &quot;^1.9.0&quot;,
    &quot;debug&quot;: &quot;^2.0.0&quot;,
    &quot;expect.js&quot;: &quot;^0.3.1&quot;,
    &quot;express&quot;: &quot;^4.9.5&quot;,
    &quot;log4js&quot;: &quot;^0.6.21&quot;,
    &quot;mocha&quot;: &quot;^1.21.4&quot;,
    &quot;mocha-mongoose&quot;: &quot;^1.0.1&quot;,
    &quot;mongodb&quot;: &quot;^1.4.19&quot;,
    &quot;mongoose&quot;: &quot;^3.8.17&quot;,
    &quot;superagent&quot;: &quot;^0.20.0&quot;,
    &quot;validator&quot;: &quot;^3.19.1&quot;
  }
}
</code></pre>

<p>##安裝套件，及全域套件 mocha</p>

<pre><code>// in project folder
$ npm install express body-parser mocha mocha-mongoose superagent validator expect.js debug mongoose mongodb log4js -save 
$ npm install -g nodemon
</code></pre>

<p>##各個套件簡單設定</p>

<p>接下來會針對一些套件作說明，但是由於可能有些人不懂整個專案的運作，因此下面看看就好，之後實作上有問題可以再回來看。</p>

<p>##Nodemon 的作用</p>

<p>範例:</p>

<pre><code>$ nodemon ./bin/server.js
...
</code></pre>

<p>就可以放著不管它了~ 只要檔案有變動，就會自動重開 server</p>

<p>##使用 logger - log4js</p>

<p>設定 logger - log4js, 並將 log 寫入到 logs/access.log 裏</p>

<pre><code>// Set logger
var log4js = require('log4js');
log4js.configure({
    appenders: [
        { type: 'console' }, //控制台輸出
        {
            type: 'file', //文件輸出
            filename: 'logs/access.log',
            maxLogSize: 20000000, // 20 MB
            backups: 10,
            category: 'normal'
        }
    ],
    replaceConsole: true
});

var logger = log4js.getLogger('normal');
logger.setLevel('INFO');

app.use(log4js.connectLogger(logger, {level: 'auto', format:':method :url'}));
</code></pre>

<p><a href="http://blog.fens.me/nodejs-log4js/">node log4s</a></p>

<p>##使用 body-parser 處理 request 的資料</p>

<p>加入 middleware</p>

<pre><code>app.use( bodyParser.json() );
app.use( bodyParser.urlencoded({ extended: true }) );
</code></pre>

<p>需要加入 { extended: true/false }, 否則會 warning:</p>

<p>body-parser deprecated undefined extended: provide extended</p>

<p>如果要接收 json request</p>

<p>client 端在 Header 中必須先設定 &ldquo;Content-type: applciation/json&rdquo;</p>

<p>才能夠在 router 中使用 <code>req.body</code> 拿到 json 值</p>

<p>##測試套件</p>

<pre><code>mocha - 專案
expect.js - 專案
superagent - 專案
</code></pre>

<p>測試流程 -</p>

<p>先跑 server 起來，透過自動化程式自動丟 request 給 server，測試結束</p>

<pre><code>$ npm start
$ mocha
$ npm stop
</code></pre>

<p>所以必須先在 package.json 中設定好 script</p>

<pre><code>{
	(...)
	&quot;scripts&quot;: {
      &quot;start&quot;: &quot;node ./bin/server.js&quot;,
      &quot;test&quot;: &quot;mocha&quot;,
      &quot;stop&quot;: &quot;pkill -lf server.js&quot;
  },
  (...)
}
</code></pre>

<p>由於我將啟動 server 的 script 放在 bin 資料夾裡，因此</p>

<p><code>npm start</code> 的 script 就會執行:</p>

<pre><code>node ./bin/server.js
</code></pre>

<p><code>npm stop</code> 的話，用到了 *nix 的指令，會先到 process list 中找到和 server.js 有關的 process，然後 kill process (<code>pkill</code>)</p>

<pre><code>pkill -lf server.js
</code></pre>

<p>跑測試的話，直接下 <code>mocha</code>，在這邊我們也丟一個 script 指定給 <code>npm test</code></p>

<p>下 <code>npm test</code> 就是等同於下 <code>mocha</code></p>

<p>上面只是大致上講解一下每個套件如何用，接下來我們會以實際的例子來說明</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/17/2014-10-17-api-d17/" class="post-title">[API-d17] - 實戰開發 - 專案結構</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-restful" href="http://kerkerj.github.io//categories/restful">restful</a><a class="post-category post-category-api" href="http://kerkerj.github.io//categories/api">api</a><a class="post-category post-category-nodejs" href="http://kerkerj.github.io//categories/nodejs">nodejs</a><a class="post-category post-category-express" href="http://kerkerj.github.io//categories/express">express</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        

<p>首先我們就在虛擬機的資料夾底下，建立一個專案資料夾吧!</p>

<p>今天會來簡單切割一下我們的專案目錄</p>

<p>##建立新專案目錄:</p>

<pre><code>$ cd /vagrant/
$ mkdir TODOAPI
$ cd TODOAPI
$ npm init
// 輸入專案資訊
$ 
</code></pre>

<p>##建立專案結構</p>

<pre><code>/
| - bin/
| - routes/
| - model/
| - node_modules/
| - logs/
| - config/
| - test/
| - app.js
| - package.json
</code></pre>

<p>分別講解一下各個 folder 的工作:</p>

<h3 id="bin:efe06a9cfabcdace1501cb271521a7ea"><code>bin</code></h3>

<p>筆者會在 <code>bin</code> 資料夾底下放一個 <code>server.js</code></p>

<p>這個 <code>server.js</code> 就是會專門用來啟動一個 <code>app.js</code> instance</p>

<p>###<code>routes</code></p>

<p>基本上如果了解 MVC 架構的話，<code>routes</code> 就是 <code>controller</code> 的意思，其實如果讀者本身夠了解的話，這個資料夾也可以改成 <code>controller</code> 也 ok，應該說，其實資料夾怎麼放都是看個人隨意即可，只是若是要模組化的話，筆者會這樣來處理一個專案結構。</p>

<p>###<code>model</code></p>

<p>拿來放資料庫 schema 以及相關的資料庫操作的資料夾</p>

<h3 id="node-modules:efe06a9cfabcdace1501cb271521a7ea"><code>node_modules</code></h3>

<p>這其實是之後安裝的模組會放在這個資料夾裡，在這邊可以先不用建立沒關係</p>

<h3 id="logs:efe06a9cfabcdace1501cb271521a7ea"><code>logs</code></h3>

<p>由於我們是建立一個 restful service，因此 log 的記錄也是很重要的，我們把 log 放在這個資料夾裡</p>

<h3 id="configs:efe06a9cfabcdace1501cb271521a7ea"><code>configs</code></h3>

<p>我們在這個資料夾裡放置一些專案設定，例如 db 設定或者是 log 的設定等等</p>

<h3 id="test:efe06a9cfabcdace1501cb271521a7ea"><code>test</code></h3>

<p>撰寫測試程式的資料夾~</p>

<h3 id="app-js:efe06a9cfabcdace1501cb271521a7ea"><code>app.js</code></h3>

<p>程式的進入點，可以想像成 index.php~</p>

<h3 id="package-json:efe06a9cfabcdace1501cb271521a7ea"><code>package.json</code></h3>

<p>專案的資訊以及相關模組的資訊都會被放在這裡!</p>

<hr />

<p>其實關於專案結構有許多不同的討論，<code>express</code> 也有一個專案自動產生器，不過如果對結構內容不了解而使用產生器的話，很容易變成只知表面不知內部運作，因此我們還是一步一步來，先定義好我們專案的需求結構</p>

<p>另外，因為我們是建立 restful API service，在此並沒有用到 html 頁面，也因此就沒有 <code>view</code> 或 <code>public</code> 這兩個資料夾囉~</p>

<p>延伸閱讀:</p>

<p>我們可以透過觀摩別人的專案來參考他們的專案架構:</p>

<p><a href="http://scotch.io/tutorials/javascript/node-and-angular-to-do-app-application-organization-and-structure">Node and Angular To-Do App: Application Organization and Structure</a></p>

<p><a href="http://stackoverflow.com/questions/18789864/node-js-express-global-modules-best-practices-for-application-structure">node.js &amp; express - global modules &amp; best practices for application structure</a></p>

<p>在 Github 上的討論，非常值得一看: <a href="https://gist.github.com/lancejpollard/1398757">Github discussion</a></p>

<p>後來覺得也可以模仿 rails 的分法:</p>

<pre><code>/
| - app/
| - ----controllers/
| - ----models/
| - ----views/
| - ----helpers/
| - node_modules/
| - logs/
| - libs/
| - public/
| - config/
| - test/
| - server.js
| - package.json
</code></pre>

<p>都 OK!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/17/2014-10-17-swift-d17/" class="post-title">[Swift-d17] - Basic - Navigation View &#43; TableView</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-swift" href="http://kerkerj.github.io//categories/swift">swift</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>今天要把 Navigation View 和 Table View 結合起來!</p>

<p>把 NavigationController 拉進 Storyboard</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2019.47.53.png" alt="image" />
</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2019.48.28.png" alt="image" />
</p>

<p>將程式進入點指向 NavigationController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2019.48.28.png" alt="image" />
</p>

<p>把原本程式自動產生的 UIViewController 刪除</p>

<p>把自動產生的 TableViewController 刪除!</p>

<p>拉一個新的 UIViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.06.29.png" alt="image" />
</p>

<p>將 NavigationController 的 RootViewController 指向新的 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.07.20.png" alt="image" />
</p>

<p>把 TableView 拉進 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.08.48.png" alt="image" />
</p>

<p>再將 TableViewCell 拉進 TableView</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.09.16.png" alt="image" />
</p>

<p>再點選 ViewController, 到右上角中找尋 Custom Class</p>

<p>將 ViewController.swift 指定給該 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.18.11.png" alt="image" />
</p>

<p>接著把 UITableView 引進程式碼裡做關聯</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.19.25.png" alt="image" />
</p>

<p>再來就是實作 Table 的 data 了</p>

<pre><code class="language-swift">class ViewController: UIViewController, UITableViewDataSource {
</code></pre>

<pre><code>class ViewController: UIViewController, UITableViewDataSource {
    
    @IBOutlet var tableView: UITableView!
    
    var arr = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]
    
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return arr.count;
    }
    
    func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {
        
        var cell: UITableViewCell? = tableView.dequeueReusableCellWithIdentifier(&quot;cell&quot;) as? UITableViewCell
        
        if cell == nil {
            cell = UITableViewCell(style: UITableViewCellStyle.Default , reuseIdentifier: &quot;cell&quot;)
        }
        cell!.textLabel?.text = arr[indexPath.row]
        
        return cell!
    }
}
</code></pre>

<p>code 實作完後，記得拉 dataSource 及 delegate</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.27.19%EF%BC%882%EF%BC%89.png" alt="image" />
</p>

<p>執行後就是 TableView + NavigationController 了</p>

<p>接下來就要加入換頁:</p>

<p>到 storyboard 再加入一個 ViewController，並從 tableView 的 cell 中建立連結到新的 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.33.35.png" alt="image" />
</p>

<p>再來新增一個 DetailViewController, 用來顯示下一頁的資料</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.35.29.png" alt="image" />
</p>

<p>記得先去做 class 關聯</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.36.03.png" alt="image" />
</p>

<p>再來加入這個 function:</p>

<pre><code>override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
        if segue.identifier == &quot;showDetail&quot; {
            let index = self.tableView.indexPathForSelectedRow()?.row
            ((segue.destinationViewController) as DetailViewController).title = arr[index!]
        }
    }
</code></pre>

<p>回到 storyboard, 點選 UITableView 和 UIView 中間的連線，設定 storyboard 的 identifier</p>

<p>設定為 <code>showDetail</code> 以便和程式一樣</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.37.36.png" alt="image" />
</p>

<p>另外回到 Storyboard 中的 TableView, 設定 cell 的 identifier 和程式一樣</p>

<p>以便 reuse</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.47.03.png" alt="image" />
</p>

<p>接著都設定完畢後，就可以執行了!</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.49.13.png" alt="image" />
</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-17%2020.49.18.png" alt="image" />
</p>

<p>這樣就完成啦!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/16/2014-10-16-api-d16/" class="post-title">[API-d16] - 實戰開發 - 設定主題及規劃</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-restful" href="http://kerkerj.github.io//categories/restful">restful</a><a class="post-category post-category-api" href="http://kerkerj.github.io//categories/api">api</a><a class="post-category post-category-apiary" href="http://kerkerj.github.io//categories/apiary">apiary</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>接下來我們想要做到的是一個 TODO list 的 RESTful API</p>

<p>並且會先使用 <a href="http://apiary.io/">apiary.io</a> 做規劃</p>

<p>實際看看感覺如何</p>

<p>進入網站後，註冊登入後</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-07%201.04.07.png" alt="image" />
</p>

<p>左上角的 dropdown list 選擇 create new API</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-07%201.04.18.png" alt="image" />
</p>

<p>產生後下方就會跑出範例文擋</p>

<p>這個網站會透過特定格式的編排自己希望的 API endpoint 及範例回傳值後，產生出一份漂亮的文件</p>

<p>網站中間是模式的選擇</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-07%201.10.33.png" alt="image" />
</p>

<p>Documentation 是實際讓其他人看的，Editor 則是編輯模式</p>

<p>我們就稍微簡單規劃一下 TODO List 的 RESTful API 吧!</p>

<p>這是我自己規劃的 <a href="http://docs.todolist7.apiary.io/">文件</a></p>

<p>基本上 route 會長這個樣子:</p>

<pre><code>TODOs
GET /user/{user_id}/todos/
POST /user/{user_id}/todos/
GET /user/{user_id}/todos/{id}
PUT /user/{user_id}/todos/{id}
DELETE /user/{user_id}/todos/{id}
</code></pre>

<p>資料格式也都在該文件整理好了</p>

<p><code>/user/{user_id}/</code> 只是用來辨識是哪個 user 的 todo task data</p>

<p>在這個小 API 不會琢磨在使用者系統的建立，只會專注在操作 todo task data</p>

<p>我們可以直接透過 PostMan 來丟丟看</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-07%201.43.06.png" alt="image" />
</p>

<p>我們設定必須要使用 API-key 才能存取 API，比較進階的做法就是使用 Oauth 的方式取得 token 來存取 API</p>

<p>不過在這個小 API 也不會建立一個 Oauth Server，我們簡單使用 API-key 來認證即可</p>

<p>接下來的時間我們就會開始依據規劃好的文件，使用 Node.js + express + mongodb 來實作囉!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/16/2014-10-16-swift-d16/" class="post-title">[Swift-d16] - Basic - Table View 2 換頁 (delegate)</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-swift" href="http://kerkerj.github.io//categories/swift">swift</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>昨天我們實際操作了 tableView 的實作，今天要加入換頁</p>

<p>意思就是假設我點了名為 &ldquo;99&rdquo; 的 cell，點擊後會跳轉到另外一頁，同樣顯示 &ldquo;99&rdquo;</p>

<p>所以除了跳頁外，還要加入值的傳遞</p>

<p>首先打開昨天的專案，我們要繼續下去</p>

<p>回到 storyboard 中，昨天我們加入了 dataSource，今天要加入 delegate:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.01.50.png" alt="image" />
</p>

<p>回到程式碼中 ViewController.swift</p>

<p>在 class 的宣告再加上 UITableViewDataSource</p>

<pre><code class="language-swift">class ViewController: UIViewController, UITableViewDataSource, UITableViewDelegate {
</code></pre>

<p>再來就要設計換頁的流程了</p>

<p>回到 storyboard</p>

<p>拉一個新的 ViewController 到空白處</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.04.50.png" alt="image" />
</p>

<p>接著點擊左邊的 TableViewCell, 按住 ctrl + 拖曳，拉到剛剛建立的 ViewController 上</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.07.11.png" alt="image" />
</p>

<p>選擇 show detail</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.07.44.png" alt="image" />
</p>

<p>就會長這樣:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.06.55.png" alt="iamge" />
</p>

<p>再來新增一個 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.09.15.png" alt="image" />
</p>

<p>接著讓新的 storyboard viewcontroller 連接到剛剛新增的 DetailViewController 程式碼</p>

<p>記得先點選 ViewController</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.10.36.png" alt="image" />
</p>

<p>在 storyboard 的 DetailViewController 中拉一個 label</p>

<p>並且將該 label 連接到 DetailViewController 的程式碼中</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.13.04.png" alt="image" />
</p>

<p>因此 DetailViewController 就會變這樣:</p>

<pre><code>class DetailViewController: UIViewController {
    @IBOutlet var label: UILabel!
</code></pre>

<p>接著再來把 DetailViewController 加入兩行 code:</p>

<pre><code>class DetailViewController: UIViewController {
    @IBOutlet var label: UILabel!
    
    var index: Int = 0
    
    override func viewDidLoad() {
        super.viewDidLoad()

        // Do any additional setup after loading the view.
        
        label.text = &quot;\(index)&quot;
    }
</code></pre>

<p>新增一個 index 變數，再來就是在 viewDidLoad 時，將該 label 的文字改成 index</p>

<p>這個 index 的值會在 TableView 中傳遞給 DetailViewController</p>

<p>接下來就要改變 index 的值了，回到 ViewController.swift 中</p>

<p>加入以下程式碼:</p>

<pre><code>func tableView(tableView: UITableView!, didSelectRowAtIndexPath indexPath: NSIndexPath!) {
      
	let cell = tableView.cellForRowAtIndexPath(indexPath)
	self.performSegueWithIdentifier(&quot;showDetail&quot;, sender: cell)
    
}
    
override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {
    if segue.identifier == &quot;showDetail&quot; {
		let indexPath = self.tableSample.indexPathForSelectedRow()?.row
	((segue.destinationViewController) as DetailViewController).index=indexPath!
	}
}
</code></pre>

<p>大家可能會覺得好奇裡頭有個 identifier 叫做 &lsquo;showDetail&rsquo;，這個東西是自己自定的，一定要定，不然在傳遞時會不知道要抓哪個 segue</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.30.24.png" alt="image" />
</p>

<p>再來確認一下是否 dataSource 與 delegate 是否都有 reference 到</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%203.32.38.png" alt="image" />
</p>

<p>執行，就可以發現可以點進去了!</p>

<p>不過因為我們還沒有和 NavigationView 做結合，因此要自己做按鈕點回去 XD</p>

<p>在這邊就先不做了，因為明天就可以兩個結合起來了!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/15/2014-10-15-api-d15/" class="post-title">[API-d15] - [Javascript 番外篇] Javascript callback, event</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-restful" href="http://kerkerj.github.io//categories/restful">restful</a><a class="post-category post-category-api" href="http://kerkerj.github.io//categories/api">api</a><a class="post-category post-category-javascript" href="http://kerkerj.github.io//categories/javascript">javascript</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>這幾天會探討 javascript 的特性，由於比較少在寫 js ，因此有錯請指正</p>

<p>javascript 有個特性：event</p>

<p>意思就是說，javascript 中，所有的事情都是由事件驅動的</p>

<p>如果說有寫過 web 前端的話，</p>

<p>其實呼叫 button.click function 時</p>

<p>並不會馬上執行 click 裡面的動作</p>

<p>而是加了一個 click 的 listener</p>

<p>等到 button 被 click 後，才會執行 click 裡面的程式碼</p>

<p>所以寫習慣一般 procedure 的程式會有點不太習慣</p>

<p>舉個 procedure 的例子，下面有五件事想要做：</p>

<pre><code class="language-javascript">煮飯(); // 10 分鐘

接電話(); // 1 分鐘

吃麵(); // 5 分鐘

丟垃圾(); // 7 分鐘
</code></pre>

<p>一般的程式會是照順序執行</p>

<p>也就是 煮飯完 -&gt; 接電話 -&gt; 吃麵 -&gt; 丟垃圾</p>

<p>總執行時間 = 23 分鐘</p>

<p>但是如果把這段 code 丟給 javascript 執行的話</p>

<pre><code>煮飯(); // 10 分鐘

接電話(); // 1 分鐘

吃麵(); // 5 分鐘

丟垃圾(); // 7 分鐘
</code></pre>

<p>就變成同時做煮飯，接電話，吃麵，丟垃圾了！</p>

<p>為了要預防這件事，有些事情還是有順序性的，</p>

<p>因此就要使用到 javascript callback 的特性</p>

<pre><code>煮飯(function() {
	吃飯(function() {
		接電話(function() {
			丟垃圾();
		});
	});
});
</code></pre>

<p>意思就是煮飯完吃飯，吃完飯接電話，接完電話丟垃圾</p>

<p>以下有一個範例：</p>

<pre><code class="language-javascript">function wash() {
    setTimeout(function() {
        console.log(&quot;wash&quot;);
    }, 1000);
}

function eat() {
    setTimeout(function() {
        console.log(&quot;eat&quot;);
    }, 5000);
}

function running() {
    setTimeout(function() {
        console.log(&quot;running&quot;);
    }, 3000);
}

function doHouseWork() {
    wash();
    eat();
    running();
}

doHouseWork();
</code></pre>

<p>做家事執行了三件事，wash, eat, 和 running</p>

<p>其中每件事都設定不同的完成時間</p>

<p>以 procedure 的程式執行方式來看，在這邊用 ruby 舉例:</p>

<pre><code class="language-ruby">def wash
  sleep 1
  puts &quot;wash&quot;
end 

def eat
  sleep 5
  puts &quot;eat&quot;
end 

def running 
  sleep 3
  puts &quot;running&quot;
end 

def doHouseWork 
  wash
  eat
  running
end 

doHouseWork
</code></pre>

<p>是會 wash 1 秒後，接著 eat 5 秒，再 running 3 秒</p>

<p>所以總共是 9 秒</p>

<p>output 的順序會是:</p>

<pre><code>wash // 1 秒
eat // 5 秒
running // 3 秒
</code></pre>

<p>但是在 javascript 中，output 的順序卻是:</p>

<pre><code>wash // 1 秒
running // 3 秒
eat // 5 秒
</code></pre>

<p>所以總長度是 5 秒</p>

<p>那今天假設想要讓 javascript 有順序性時該怎麼辦?</p>

<p>拿上面的例子作修改的話:</p>

<pre><code class="language-javascript">function wash(callback) {
    setTimeout(function() {
        console.log(&quot;wash&quot;);
        callback.call();
    }, 1000);
}

function eat(callback) {
    setTimeout(function() {
        console.log(&quot;eat&quot;);
        callback.call();
    }, 5000);
}

function running() {
    setTimeout(function() {
        console.log(&quot;running&quot;);
    }, 3000);
}

function doHouseWork(callback) {
    console.log(&quot;doing house work&quot;);
    callback.call();
}

doHouseWork(function(){
    wash(function() {
        eat(function() {
            running();
        });
    });
});
</code></pre>

<p>很不錯的特性，但是也要特別對於這種特性作處理</p>

<p>有個 lib 很好用，<code>async.js</code> <a href="https://github.com/caolan/async">來源</a></p>

<p>下回待續!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/15/2014-10-15-swift-d15/" class="post-title">[Swift-d15] - Basic - Table View 1 直接給值 datasource, (table view scroll)</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-swift" href="http://kerkerj.github.io//categories/swift">swift</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>今天要來練習新的東西 - TableView</p>

<p>據同事說明，TableView 是最常用到的 View 之一</p>

<p>在我們的實戰開發中也會用到 TableView</p>

<p>因此今天就先簡單的來建立出單頁純顯示資料的 TableView</p>

<p>TableView 的概念大概是如下圖:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.30.44.png" alt="image" />
</p>

<p>長得有點像 ListView 但是每一行又可以多切開，放一些東西</p>

<p>每一行都稱之為一個 TableViewCell</p>

<p>今天就來要簡單寫一個資料已經預先定義好，並且會顯示在 view 上面的 TableView</p>

<p>要進行下去之前當然就先開一個新的練習專案囉</p>

<p>開啟完專案後，首先第一件事情就是進 storyboard</p>

<p>選擇 TableView 拉進 storyboard 裏</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.34.28.png" alt="image" />
</p>

<p>接著再選擇 TableViewCell 拉進 TableView 中</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.35.16.png" alt="image" />
</p>

<p>透過此圖，我們了解到可以打開 storyboard 的 tree 來看看它們之間的關係</p>

<p>下面此步驟很重要，資料的連接就靠這條線:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.38.16.png" alt="image" />
</p>

<p>先選取 TableView (可以使用階層樹或是點擊 storyboard)，然後選擇右方的 connection inspector (右上角的最右邊的那一個按鈕)</p>

<p>裡頭有個 dataSource 以及 delegate</p>

<p>我們先按住 dataSource 右邊的空心圓按鈕，拖曳拉到 storyboard 中的 ViewController，如上圖所示</p>

<p>這樣子等等在程式碼中產生的資料才會有和 storyboard 的 UI 做連結</p>

<p>最後一個和 storyboard 相關的操作是將 storyboard 的 TableView 和 程式碼做連結，好方便我們在程式碼中對 storyborad 的 TableView 做操作</p>

<p>之前就有做過類似的事情了，就是按著 ctrl + 拖曳拉進程式碼中：</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.42.32.png" alt="image" />
</p>

<p>給他個名稱：</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.44.57.png" alt="image" />
</p>

<p>這時候的程式應該會長這樣:</p>

<pre><code class="language-swift">import UIKit

class ViewController: UIViewController {

    @IBOutlet var tableSample: UITableView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
}
</code></pre>

<p>再來就是程式的部分了</p>

<p>先直接貼出 ViewController 的程式碼:</p>

<pre><code class="language-swift">import UIKit

class ViewController: UIViewController, UITableViewDataSource {

    @IBOutlet var tableSample: UITableView!
    
    var items: [String] = []
    
    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
        
        for var i = 0 ; i &lt;= 100 ; i++ {
            items.append(&quot;\(i)&quot;)
        }
        
        self.tableSample.registerClass(UITableViewCell.self, forCellReuseIdentifier: &quot;cell&quot;)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return self.items.count
    }
    
    func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell{
        
        var cell: UITableViewCell = self.tableSample.dequeueReusableCellWithIdentifier(&quot;cell&quot;) as UITableViewCell
        cell.textLabel?.text = self.items[indexPath.row]
        
        return cell
    }
}
</code></pre>

<p>這中間了幾件事:</p>

<p>viewDidload 產生一個 0 ~ 100 的陣列，並且向 tableSample 註冊了一個 cell 物件，並且設定該物件的 identifier 為 &ldquo;cell&rdquo;</p>

<p>接著下面兩個 function 是實作顯示資料以及資料行數的部分:</p>

<pre><code>func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
	return self.items.count
}
    
func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell{
        
	var cell: UITableViewCell = self.tableSample.dequeueReusableCellWithIdentifier(&quot;cell&quot;) as UITableViewCell
	cell.textLabel?.text = self.items[indexPath.row]
        
	return cell
}
</code></pre>

<p>第一個 tableView 的方法是回傳這個 tableView 的資料有多少筆</p>

<p>第二個 tableView 則是根據每一行的值，產生一個 cell，將陣列值丟進該 cell 的文字，並且回傳</p>

<p>這樣理論上就會顯示 0 ~ 100 個 cell，裡面的值分別是依據順序而顯示號碼</p>

<p>注意在程式的 class 那一行</p>

<pre><code>class ViewController: UIViewController, UITableViewDataSource {
</code></pre>

<p>有多一個 UITableViewDataSource, 因為我們要將資料丟到 UITableView 中，因此需要使用繼承該類別</p>

<p>等明天我們要做換頁功能時，就要加入其他的類別了</p>

<p>程式撰寫好後，執行看看吧!</p>

<p>應該就會長這樣子喲:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-15%202.56.47.png" alt="image" />
</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/14/2014-10-14-api-d14/" class="post-title">[API-d14] - [Javascript 番外篇] Javascript function scopes 和 closures</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-restful" href="http://kerkerj.github.io//categories/restful">restful</a><a class="post-category post-category-api" href="http://kerkerj.github.io//categories/api">api</a><a class="post-category post-category-javascript" href="http://kerkerj.github.io//categories/javascript">javascript</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>這幾天會探討 javascript 的特性，由於比較少在寫 js ，因此有錯請指正</p>

<p>##Scope</p>

<p>例子:</p>

<pre><code class="language-javascript">function hi() {
    var greetings = &quot;hi&quot;;

    console.log(&quot;Say: &quot; + greetings);

    function sayYa(newInput) {
        greetings = newInput;
        console.log(&quot;Say: &quot; + greetings);
    }

    function sayCool(newInput) {
        var cool = newInput;
        console.log(&quot;Say: &quot; + cool);
    }

    sayYa(&quot;Yo&quot;);
    sayCool(&quot;Cool&quot;);

    console.log(&quot;Say: &quot; + greetings);
}

hi();
</code></pre>

<p>很簡單的概念</p>

<p>greetins 在 sayYa 方法中被覆寫掉了</p>

<p>如果要定義 local 變數必須在 function 裏用 var 定義</p>

<p>例如 sayCool function</p>

<p>##Closure</p>

<p>例子:</p>

<pre><code>function person(){
    var name = 'default';

    return {
        greetings: function() {
            console.log( name );
        },
        changeName: function(newInput) {
            name = newInput;
        }
    };
}

var me = new person();
me.greetings();
me.changeName(&quot;kerkerj&quot;);
me.greetings();
</code></pre>

<p>##Self-Executing Anonymous Functions</p>

<p>使用這種方式通常是避免和其他 js 檔案造成變數混淆</p>

<p>或是初始化</p>

<p>裡面的變數和 function 只被限制在這個範圍內</p>

<p>例子:</p>

<pre><code>(function(){
    var hi = 'Hello';

    function sayHi(name){
        return hi + ' ' + name;
    }

    global.greetings = sayHi
})(global);

console.log(global.greetings(&quot;kerkerj&quot;));
console.log(hi); // &lt;- 這會失敗
</code></pre>

<p>必須將 sayHi 指給 global 的某一個變數, 才有辦法使用它</p>

<p>在 node.js 中 global 是全域變數，在瀏覽器中是 window~</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/14/2014-10-14-swift-d14/" class="post-title">[Swift-d14] - Basic - Navigation View 2 &#43; ViewController</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-swift" href="http://kerkerj.github.io//categories/swift">swift</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>延續昨天的主題，今天我們要做的事情是：</p>

<ol>
<li>爲新的 ViewController 實際加入程式碼 (ViewController2.swift)</li>
<li>加入一個 button 來控制是否前進下一頁或後退</li>
</ol>

<p>我們先新增一個檔案:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.04.30.png" alt="image" />
</p>

<p>接著選擇 CocoaTouch Class:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.05.56.png" alt="image" />
</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.06.45.png" alt="image" />
</p>

<p>回到 storyboard, 選擇第二個 ViewController</p>

<p>並按照下圖，將 Class 指定給 View2Controller</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.07.15.png" alt="image" />
</p>

<p>這樣子 storyboard 的 View2 就會指定到 View2Controller 了</p>

<p>我們在 View2Controller 的 viewDidLoad 方法中加入一行程式碼</p>

<p>來驗證他是否有吃到 View2Controller</p>

<pre><code class="language-swift">self.title = &quot;View2 by me&quot;
</code></pre>

<p>Run 起來看的話就會是這樣:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.10.52.png" alt="image" />
</p>

<p>的確是有吃到程式碼的</p>

<p>再來就是要加入按鈕了:</p>

<p>我們先拉一個 Button 進 View2Controller</p>

<p>並且將該 Button 拉進 View2Controller 的 code</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.11.41.png" alt="image" />
</p>

<p>設定該 button 爲 Action, 並且名稱是 &lsquo;backToView&rsquo;</p>

<p>意即我們要讓點下 View2Controller 的 Button 行為為回到上一個 View</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.12.50.png" alt="image" />
</p>

<p>另外對 View2 為他加入一個 storyboard ID, View2，等等會用到:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.20.21.png" alt="image" />
</p>

<p>View1 同樣也加入一個 Button, 並且也是拉到 View1 的 code 中，</p>

<p>同樣是設定 Action ，action name 定義為 &lsquo;goView2&rsquo;</p>

<p>就是按下 button 後會到 View2</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.13.59.png" alt="image" />
</p>

<p>接著我們分別在 ViewController 及 View2Controller 的程式碼中加入以下程式碼:</p>

<p>View1 -</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.15.48.png" alt="image" />
</p>

<pre><code class="language-swift">@IBAction func goView2(sender: AnyObject){
self.navigationController?.pushViewController(self.storyboard?.instantiateViewControllerWithIdentifier(&quot;View2&quot;) as View2Controller, animated: true)
}
</code></pre>

<p>View2 -</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%202.15.56.png" alt="image" />
</p>

<pre><code class="language-swift">@IBAction func backToView(sender: AnyObject) {
	self.navigationController?.popViewControllerAnimated(true)
}
</code></pre>

<p>在這邊 Navigation 用到的是 Push, Pop 的概念，使用 View stack</p>

<p>進到下一個 View 時，就 push 欲前往的 View</p>

<p>回到上一個 View 時，就 pop 出上一個 View</p>

<p>在 goView2 中，我們使用到了 storyboard 的 identifier</p>

<p>先讓 storyboard 抓有沒有 identifier 名為 &ldquo;View2&rdquo; 的物件</p>

<p>有的話就抓起來，並且使用 as 轉型成 View2Controller, push 進 stack</p>

<p>做完上述事情後，執行程式碼就可以看到結果囉!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">2014-10-10 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="http://kerkerj.github.io/blog/2014/10/13/2014-10-13-swift-d13/" class="post-title">[Swift-d13] - Basic - Navigation View 1 &#43; ViewController</a>

                        <p class="post-meta">
                            
                            
                                under
                                
                                <a class="post-category post-category-swift" href="http://kerkerj.github.io//categories/swift">swift</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>今天來試著拉拉看 Navigation View</p>

<p>什麼是 Navigation View?</p>

<p>就是類似下圖的東西:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.07.37.png" alt="image" />
</p>

<p>用來控制 View 之間的流程</p>

<p>今天我們繼續使用 storyboard 來簡單拉拉 Navigation View</p>

<p>首先先開一個新 project 吧!</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.09.15.png" alt="image" />
</p>

<p>接著我們到 storyboard，選擇 ViewController</p>

<p>再來我們要嵌入 Navigation View</p>

<p>所以要選擇: Edit -&gt; Embed in -&gt; Navigation View</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.10.09.png" alt="image" />
</p>

<p>選擇後，就會發現 storyboard 的 layout 改變了</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.11.36.png" alt="image" />
</p>

<p>Navigation View 實際上是透過 NavigationController 來控制</p>

<p>原本程式的進入點是 ViewController</p>

<p>由於我們要使用 Navigation View</p>

<p>因此透過 Xcode 將 NavigationController 嵌進去</p>

<p>讓程式進入點變成 NavigationController</p>

<p>再透過 NavigationController 將程式導到 ViewController</p>

<p>接下來我們命名一下 ViewController:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.14.28.png" alt="image" />
</p>

<p>然後我們從右下角的 Object library 選擇 Bar Button items 加入</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.14.56.png" alt="image" />
</p>

<p>並將該物件拉到 NavigationBar 的右方</p>

<p>接下來我們希望點下 item 按鈕，可以到另外一個 ViewController</p>

<p>因此一樣從右下角的 Object library 拉一個 ViewController 到 storyboard 的空白處</p>

<p>直接拉一個過去就好</p>

<p>所以會長這樣:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.17.30.png" alt="image" />
</p>

<p>接著就從 ViewController 的 item 上，按著 ctrl + 拖曳，</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.18.29.png" alt="image" />
</p>

<p>往右邊剛剛新增的 ViewController 拉，放開後就會選擇要做的動作，我們選擇 &lsquo;show&rsquo;</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.19.44.png" alt="image" />
</p>

<p>為了辨識起見，我們點選第二個 ViewController ，加入 Title:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-13%201.22.11.png" alt="image" />
</p>

<p>都設定好後，按下執行，應該就可以看到 Navigation View 正常運作了!</p>

<p>按下 item 會到 View2, View2 會自動產生 back 鍵，回到 View1</p>

<p>是不是很方便呢!</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="http://kerkerj.github.io/page/3/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 4 of 14</span>
    
      <a href="http://kerkerj.github.io/page/5/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="http://kerkerj.github.io//js/all.min.js"></script>
<script>
hljs.initHighlightingOnLoad();
</script>

        </div>
    </div>
</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-45583907-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
