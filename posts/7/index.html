
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>kerkerj</title>
  <meta name="author" content="kerkerj">

  
  <meta name="description" content="cool thing, cool guy">
  <meta name="keywords" content="mac,ubuntu,nginx,rails,ruby,php,mysql,freebsd,technique,geek">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kerkerj.github.io/posts/7">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="kerkerj" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<link href="/favicon.ico" rel="icon">
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45583907-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">kerkerj</a></h1>
  
    <h2>Cool</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
  
  
  
  
<ul class="subscription">
  <li><a href="https://github.com/kerkerj" rel="subscribe-github" title="@kerkerj on GitHub">GitHub</a></li>
</ul>
  
  
  
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kerkerj.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/notes">Notes</a></li>
  <li><a href="/mac-app-list">Mac App List</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/02/rails-put-vs-patch/">[Rails] PUT v.s. PATCH</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-02T07:39:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/01/02/rails-put-vs-patch/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2014/01/02/rails-put-vs-patch/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>According to rails convention,</p>

<p>PUT is used for updating an existing resource</p>

<p>POST is used for creating a new resource</p>

<p>In rails 4, PUT has been changed to PATCH to avoid confusion.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> posts GET    /posts(.:format)                            {:action=&gt;"index", :controller=&gt;"posts"}
</span><span class='line'>      POST   /posts(.:format)                            {:action=&gt;"create", :controller=&gt;"posts"}
</span><span class='line'> new_post GET    /posts/new(.:format)                        {:action=&gt;"new", :controller=&gt;"posts"}
</span><span class='line'>edit_post GET    /posts/:id/edit(.:format)                   {:action=&gt;"edit", :controller=&gt;"posts"}
</span><span class='line'> post GET    /posts/:id(.:format)                        {:action=&gt;"show", :controller=&gt;"posts"}
</span><span class='line'>      PUT    /posts/:id(.:format)                        {:action=&gt;"update", :controller=&gt;"posts"}
</span><span class='line'>      DELETE /posts/:id(.:format)                        {:action=&gt;"destroy", :controller=&gt;"posts"}
</span><span class='line'></span></code></pre></td></tr></table></div></figure>


<p>延伸閱讀：ihower - <a href="http://ihower.tw/blog/archives/6483">HTTP Verbs: 談 POST, PUT 和 PATCH 的應用</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/02/rails-list-of-rails-model-type-mysql/">[Rails] List of Rails Model Type (MySQL)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-02T07:38:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/01/02/rails-list-of-rails-model-type-mysql/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2014/01/02/rails-list-of-rails-model-type-mysql/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>:binary<br/>
:boolean<br/>
:date<br/>
:datetime<br/>
:decimal<br/>
:float<br/>
:integer<br/>
:primary_key<br/>
:string<br/>
:text<br/>
:time<br/>
:timestamp</p>

<p><a href="http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html#method-i-column</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/26/aws-ubuntu-swap/">[AWS] Ubuntu Swap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-26T10:11:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/26/aws-ubuntu-swap/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/26/aws-ubuntu-swap/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Add swap for an instance</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo /bin/dd if=/dev/zero of=/var/swap.1 bs=1M count=1024
</span><span class='line'>$ sudo /sbin/mkswap /var/swap.1
</span><span class='line'>$ sudo /sbin/swapon /var/swap.1
</span><span class='line'>$ echo "/var/swap.1 swap swap defaults 0 0" &gt;&gt; /etc/fstab #將 swap 加入 開機啟動</span></code></pre></td></tr></table></div></figure>


<p>在 Amazon EC2 micro plan，加入 swap 很容易 I/O 過量，
因此最好是需要時才開啟 swap，不用時關閉 swap 以免被收錢~</p>

<p>swap usage</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> swapon -s
</span><span class='line'><span class="gp">$</span> free -k
</span><span class='line'><span class="go">---</span>
</span><span class='line'><span class="gp">$</span> swapoff -a
</span><span class='line'><span class="gp">$</span> swapon  -a
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/24/sublimetext2-use-command-to-call-sublime-text2/">[SublimeText2] Use Command to Call Sublime Text2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-24T07:26:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/24/sublimetext2-use-command-to-call-sublime-text2/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/24/sublimetext2-use-command-to-call-sublime-text2/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/sublime</span></code></pre></td></tr></table></div></figure>


<p>in terminal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sublime filename
</span><span class='line'>$ sublime . (open the directory)</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/22/gem-how-to-make-no-ri-no-rdoc-the-default-for-gem-install/">[Gem] How to Make &#8211;no-ri &#8211;no-rdoc the Default for Gem Install?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-22T08:50:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/22/gem-how-to-make-no-ri-no-rdoc-the-default-for-gem-install/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/22/gem-how-to-make-no-ri-no-rdoc-the-default-for-gem-install/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In home dir, create a file: .gemrc (on linux, maybe on mac)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo "gem: --no-ri --no-rdoc" &gt;&gt; ~/.gemrc</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/20/ubuntu-ror-environment/">[Ubuntu] RoR Environment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-20T03:34:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/20/ubuntu-ror-environment/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/20/ubuntu-ror-environment/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>RVM with Ruby2.0.0-p353 + Rails4.0.2 + Ubuntu12.04(precise64) + php-fpm by Vagrant(clean install)</h2>

<p>p.s.
If you don&rsquo;t use RVM, you can just follow the instruction from <a href="http://www.modrails.com/documentation/Users%20guide%20Nginx.html#install_on_debian_ubuntu">Passenger offcial website</a>. It will be easier.
Plus, I installed all these things by Vagrant.</p>

<h2>First thing to do</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get update
</span><span class='line'>$ sudo apt-get upgrade</span></code></pre></td></tr></table></div></figure>


<h2>Pre-setup: install necessary packages</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get update
</span><span class='line'>$ sudo apt-get install build-essential libssl-dev libpcre3-dev libncurses5-dev libreadline6-dev git vim curl libcurl4-openssl-dev libreadline6 autoconf openssl git-core zlib1g zlib1g-dev  libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev autoconf libc6-dev libgdbm-dev libncurses5-dev automake libtool bison subversion pkg-config libffi-dev</span></code></pre></td></tr></table></div></figure>


<h2>Get .bashrc from my repo (Optional)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd
</span><span class='line'>$ git clone https://github.com/jerry54010/bash-it.git
</span><span class='line'>$ mv bash-it .bash_it
</span><span class='line'>$ cd .bash_it
</span><span class='line'>$ git checkout ubuntu
</span><span class='line'>$ ln -s ~/.bash_it/.bash_profile ~/.bash_profile
</span><span class='line'>$ cd
</span><span class='line'>$ source ~/.bash_profile</span></code></pre></td></tr></table></div></figure>


<h2>Get .vimrc from my repo (Optional)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget https://gist.github.com/jerry54010/8049575/raw/42ced22651fedf06174457e311d22d17f6591b65/.vimrc</span></code></pre></td></tr></table></div></figure>


<h2>RVM and Ruby 2.0 (RVM: Ruby version management)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ \curl -sSL https://get.rvm.io | bash -s stable
</span><span class='line'>$ source ~/.bash_profile //if you installed my bash_profile. 
</span><span class='line'>//If not, source ~/.profile
</span><span class='line'>$ rvm requirements
</span><span class='line'>$ echo 'gem: --no-ri --no-rdoc'  &gt;&gt; ~/.gemrc
</span><span class='line'>$ rvm install 2.0.0
</span><span class='line'>$ source ~/.bash_profile //if you installed my bash_profile. 
</span><span class='line'>//If not, source ~/.profile
</span><span class='line'>
</span><span class='line'>add this line to .bash_rc or .bash_profile (if you don't use my .bash_profile)
</span><span class='line'>[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
</span><span class='line'>
</span><span class='line'>$ rvm use 2.0.0 --default</span></code></pre></td></tr></table></div></figure>


<p>Now we should be using ruby2.0.0 by RVM, let&rsquo;s check:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rvm list
</span><span class='line'>=* ruby-2.0.0-p353 [ x86_64 ] 
</span><span class='line'>// =&gt; - current
</span><span class='line'>// =* - current && default
</span><span class='line'>//  * - default</span></code></pre></td></tr></table></div></figure>


<h2>Nodejs, libv8-dev(for javascript) and SQLite3 (sqlite3 libsqlite3-dev)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get -y install nodejs libv8-dev sqlite3 libsqlite3-dev </span></code></pre></td></tr></table></div></figure>


<h2>Passenger with NGINX</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem install passenger 
</span><span class='line'>$ rvmsudo passenger-install-nginx-module
</span><span class='line'>choose 2: customize
</span><span class='line'>  a. src dir: /home/vagrant/nginx-1.4.4/ (where the nginx you download)
</span><span class='line'>  b. I installed nginx with passenger in `/etc/nginx` (default is /opt/nginx)
</span><span class='line'>  c. default</span></code></pre></td></tr></table></div></figure>


<h2>Get nginx script</h2>

<p>If you use /opt/nginx as root dir, you don&rsquo;t need to modify this script.
If you use /etc/nginx or else dir as root dir like me, you should modify the script.
(from <a href="https://library.linode.com/web-servers/nginx/installation/ubuntu-12.04-precise-pangolin">linode</a>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget -O init-deb.sh http://library.linode.com/assets/1139-init-deb.sh
</span><span class='line'>$ sudo mv init-deb.sh /etc/init.d/nginx
</span><span class='line'>$ chmod +x /etc/init.d/nginx
</span><span class='line'>$ sudo /usr/sbin/update-rc.d -f nginx defaults</span></code></pre></td></tr></table></div></figure>


<p>The nginx default public folder will be in <code>/etc/nginx/html</code>
check nginx version:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ /etc/nginx/sbin/nginx -v
</span><span class='line'>nginx version: nginx/1.4.4</span></code></pre></td></tr></table></div></figure>


<h2>Install php5-fpm</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get -y install php5-cli php5-common php5-fpm
</span><span class='line'>$ sudo vim /etc/php5/fpm/php.ini 
</span><span class='line'>//(find and change to `cgi.fix_pathinfo = 0` )
</span><span class='line'>$ sudo vim /etc/php5/fpm/pool.d/www.conf 
</span><span class='line'>//change: listen = 127.0.0.1:9000 to listen = /var/run/php5-fpm.sock
</span><span class='line'>$ sudo vim /etc/nginx/conf/nginx.conf or /opt/nginx/conf/nginx.conf //find and modify 
</span><span class='line'>location ~ \.php$ {
</span><span class='line'>    fastcgi_split_path_info ^(.+\.php)(/.+)$;
</span><span class='line'>    # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
</span><span class='line'>    # With php5-cgi alone:
</span><span class='line'>    #fastcgi_pass 127.0.0.1:9000;
</span><span class='line'>    # With php5-fpm:
</span><span class='line'>    fastcgi_pass unix:/var/run/php5-fpm.sock;
</span><span class='line'>    fastcgi_index index.php;
</span><span class='line'>    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
</span><span class='line'>    include fastcgi_params;
</span><span class='line'>}
</span><span class='line'>$ echo "&lt;?php phpinfo(); ?&gt;" | sudo tee -a /etc/nginx/html/phpinfo.php</span></code></pre></td></tr></table></div></figure>


<p>Restart all:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo service php5-fpm restart
</span><span class='line'>$ sudo service nginx restart</span></code></pre></td></tr></table></div></figure>


<h2>Install rails</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem install rails</span></code></pre></td></tr></table></div></figure>


<h2>RoR environment check</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ruby -v 
</span><span class='line'>ruby 2.0.0p353 (2013-11-22 revision 43784) [x86_64-linux]
</span><span class='line'>$ rails -v
</span><span class='line'>Rails 4.0.2
</span><span class='line'>$ rake -V
</span><span class='line'>rake, version 10.1.0</span></code></pre></td></tr></table></div></figure>


<p>If you passed, you are good to go!</p>

<h2>Deploy Rails application by nginx:</h2>

<p>Assume your rails application path is: <code>/home/vagrant/projects/subapp/</code>
(by <code>rails new subapp</code>)
then, the <code>/etc/nginx/conf/nginx.conf</code> will be:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http {
</span><span class='line'>    ...
</span><span class='line'>    server {
</span><span class='line'>        listen 80;
</span><span class='line'>        server_name localhost;
</span><span class='line'>        root /etc/nginx/html;
</span><span class='line'>
</span><span class='line'>        # This block has been added.
</span><span class='line'>        location ~ ^/subapp(/.*|$) {
</span><span class='line'>            passenger_base_uri /subapp;
</span><span class='line'>            alias /home/vagrant/projects/subapp/public$1;  # &lt;-- be sure to point to 'public'!
</span><span class='line'>            passenger_app_root /home/vagrant/projects/subapp;
</span><span class='line'>            passenger_enabled on;
</span><span class='line'>            rails_env development; # or production
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>    ...
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>restart nginx, you can access the url: <code>http://localhost/subapp/</code></p>

<h2>Install MySQL and Mysql adapter</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get -y install mysql-server mysql-common mysql-client libmysqlclient-dev  
</span><span class='line'>$ gem install mysql2 //gem mysql2 is faster than gem mysql  </span></code></pre></td></tr></table></div></figure>


<blockquote><p>The gem you installed is placed in RVM&rsquo;s ruby, if you are using RVM&rsquo;s ruby.</p></blockquote>

<p>If you use MySQL in your rails application, remember to change the database.yml.</p>

<p>p.s. If you want to use phpmyadmin, you can do:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install php5-mysql</span></code></pre></td></tr></table></div></figure>


<p>download phpmyadmin, then extract to <code>/etc/nginx/html/phpmyadmin</code><br/>
then start the server, access: <code>http://localhost/phpmyadmin/</code></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/19/vagrant-use-knife-solo-to-deploy-a-new-vm/">[Vagrant] Use Knife-solo to Deploy a New VM</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-19T10:47:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/19/vagrant-use-knife-solo-to-deploy-a-new-vm/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/19/vagrant-use-knife-solo-to-deploy-a-new-vm/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>My own computer: host side
My VM: guest side</p>

<p>knife-solo is a tool for Chef.
host side: you need ruby environment!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem install knife-solo</span></code></pre></td></tr></table></div></figure>


<p>The only thing you need to install is just knife-solo by ruby!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ knife configure -r . --defaults (產生預設設定檔，內容為空)
</span><span class='line'>$ knife cookbook create "package"
</span><span class='line'>$ knife solo bootstrap vagrant@ip.address (bootstrap = prepare + cook, only for the first time)</span></code></pre></td></tr></table></div></figure>


<p>加入菜單：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ knife cookbook create nginx</span></code></pre></td></tr></table></div></figure>


<p>在 cookbooks/nginx/recipes/default.rb 裡最少要加入
<code>package 'nginx'</code> 也就是套件名稱
其他內容可以自己加
例如：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>package 'nginx'
</span><span class='line'>
</span><span class='line'>service 'nginx' do
</span><span class='line'>    supports [:status, :restart, :reload]
</span><span class='line'>      action :start
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>directory "/vagrant/demo" do
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>file "/vagrant/index.php" do
</span><span class='line'>    content "&lt;?php phpinfo(); ?&gt;"
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>template "/etc/nginx/sites-enabled/default" do
</span><span class='line'>    source 'default.erb'
</span><span class='line'>      notifies :restart, 'service[nginx]', :immediately
</span><span class='line'>end
</span><span class='line'></span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/18/ubuntu-bash-warning-setlocale-lc-ctype-cannot-change-locale/">[Ubuntu] -bash: Warning: Setlocale: LC_CTYPE: Cannot Change Locale</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-18T08:42:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/18/ubuntu-bash-warning-setlocale-lc-ctype-cannot-change-locale/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/18/ubuntu-bash-warning-setlocale-lc-ctype-cannot-change-locale/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo locale-gen zh_TW.UTF-8
</span><span class='line'>$ sudo update-locale LANG=zh_TW.UTF-8</span></code></pre></td></tr></table></div></figure>


<p>reload your bash profile</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/18/ruby-pp-to-ruby-as-var-dump-to-php/">[Ruby] PP to Ruby as Var_dump to PHP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-18T06:46:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/18/ruby-pp-to-ruby-as-var-dump-to-php/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/18/ruby-pp-to-ruby-as-var-dump-to-php/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;pp&#39;</span>
</span><span class='line'><span class="n">pp</span><span class="p">(</span><span class="no">ENV</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Usage:
pp(any_variable)</p></blockquote>

<p>just like <code>var_dump</code> in <code>php</code></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/16/codeigniter-use-markdown-as-library/">[Codeigniter] Use Markdown as Library</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-16T07:01:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/12/16/codeigniter-use-markdown-as-library/#disqus_thread"
             data-disqus-identifier="http://kerkerj.github.io/blog/2013/12/16/codeigniter-use-markdown-as-library/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/erusev/parsedown">https://github.com/erusev/parsedown</a></p>

<p>download the Parsedown.php
and put it into Library folder
then edit autoload.php</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$autoload['libraries'] = array('Parsedown');</span></code></pre></td></tr></table></div></figure>


<p>then in the view php for tests:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$text = 'Hello **Parsedown**!';
</span><span class='line'>$result = Parsedown::instance()-&gt;parse($text);
</span><span class='line'>echo $result;</span></code></pre></td></tr></table></div></figure>


<p>No need to require or include the file.
If you want to load a file with path, you can use the function called file_get_contents:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>file_get_contents('./markdown/test.md',true); (true: enable path)</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/8">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/6">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - kerkerj -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kerkerj-github';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
