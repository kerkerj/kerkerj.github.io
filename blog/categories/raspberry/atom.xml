<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Raspberry | kerkerj]]></title>
  <link href="http://kerkerj.github.io/blog/categories/raspberry/atom.xml" rel="self"/>
  <link href="http://kerkerj.github.io/"/>
  <updated>2015-04-23T02:01:04+08:00</updated>
  <id>http://kerkerj.github.io/</id>
  <author>
    <name><![CDATA[kerkerj]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Raspberry Pi2 Remote Webcam]]></title>
    <link href="http://kerkerj.github.io/blog/2015/04/22/raspberry-pi2-remote-webcam/"/>
    <updated>2015-04-22T23:43:38+08:00</updated>
    <id>http://kerkerj.github.io/blog/2015/04/22/raspberry-pi2-remote-webcam</id>
    <content type="html"><![CDATA[<p>如題~</p>

<p>先假設 pi2 本身的 IP 是 <code>192.168.1.200</code></p>

<p>首先先進去 server 來更新一下~</p>

<pre><code>$ sudo apt-get update &amp;&amp; sudo apt-get upgrade
</code></pre>

<p>再來就裝 <a href="http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome">motion</a></p>

<p>他其實是一個 motion detector，不過也可以拿來當作 web cam 用的 streaming server XD</p>

<pre><code>$ sudo apt-get install motion
</code></pre>

<p>編輯設定檔 <code>/etc/motion/motion.conf</code></p>

<pre><code>$ sudo vi /etc/motion/motion.conf
</code></pre>

<p>找到以下幾個值，並分別改成下面</p>

<pre><code>daemon = ON 
webcam_localhost = OFF
control_localhost = OFF
</code></pre>

<p><code>webcam_localhost</code> 是 streaming 介面</p>

<p><code>control_localhost</code> 是設定介面</p>

<p>如果要改預設 port，就找 <code>webcam_port</code>, or <code>control_port</code></p>

<p>最後設定將 service 啟動</p>

<pre><code>$ sudo vi /etc/default/motion
</code></pre>

<p>將 no 改成 yes</p>

<pre><code>start_motion_daemon = yes
</code></pre>

<p>啟動 service</p>

<pre><code>$ sudo service motion start
</code></pre>

<p>motion 這個 service 預設的 port 是 8080/8081 (可以在前述的設定檔更改)</p>

<p>開啟瀏覽器, 連入 <code>http://192.168.1.200:8080</code> or <code>http://192.168.1.200:8081</code></p>

<p>這邊會有個小問題，就是連 8080 時會很正常</p>

<p>但是 8081 時如果是用 chrome，則怎麼都進不去</p>

<p>後來發現 <a href="http://www.lavrsen.dk/foswiki/bin/view/Motion/SupportQuestion2013x09x01x104741">這篇</a></p>

<p>他說 Chrome 不再支援 raw MJPEG streams 了</p>

<p>所以就是用其他瀏覽器開吧, 我是用 Safari :D</p>

<p>記得要和你的 pi2 在同一個 wifi 環境下~</p>

<p>剩下的還有許多設定可以玩～ 改天再來慢慢玩</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup Wifi on Raspberry Pi2]]></title>
    <link href="http://kerkerj.github.io/blog/2015/04/22/setup-wifi-on-raspberry-pi2/"/>
    <updated>2015-04-22T22:59:11+08:00</updated>
    <id>http://kerkerj.github.io/blog/2015/04/22/setup-wifi-on-raspberry-pi2</id>
    <content type="html"><![CDATA[<p>(這是篇筆記)</p>

<p>前陣子從前同事那接手了一塊 raspberry pi2 的板子</p>

<p>想要用 wifi 來連網，於是就買了一個 usb 無線網卡</p>

<p>型號是:</p>

<p>TP-LINK TL-WN725N 150MbpsUSB無線網卡 (<a href="http://24h.pchome.com.tw/prod/DRAF4Z-A75333252">pchome連結</a>)</p>

<p>一開始當然還是必須先插網路線，<code>ssh</code> 進去後</p>

<p>先檢查 <code>pi2</code> 的 <code>kernel</code> 版本</p>

<pre><code>$ uname -r
3.18.7-v7+ # 這是我的版本
</code></pre>

<p>接著根據這個 <a href="https://github.com/lwfinger/rtl8188eu/">repo</a></p>

<p>將韌體載下來放到 /lib/firmware 裡</p>

<pre><code>$ sudo wget https://github.com/lwfinger/rtl8188eu/raw/c83976d1dfb4793893158461430261562b3a5bf0/rtl8188eufw.bin -O /lib/firmware/rtlwifi/rtl8188eufw.bin 
</code></pre>

<p>再來設定 pi2 的網路</p>

<pre><code>$ ifconfig
eth0      Link encap:Ethernet  
lo        Link encap:Local Loopback
wlan0     Link encap:Ethernet 
</code></pre>

<p>如果網卡有裝成功，應該就會有 <code>wlan0</code> 或是 <code>wlanX</code> 之類的 (X 是數字)</p>

<p>最後就是手動掃描無線網路，並設定連線值囉</p>

<pre><code>$ sudo iwlist scan =&gt; 掃描無線網路 AP
wlan0     Scan completed :
          Cell 01 - Address: XX:XX:XX:XX:XX:XX
                    ESSID:"GGININDER"
          Cell 02 - Address: XX:XX:XX:XX:XX:XX
                    ESSID:"TP-LINK_F5566"
</code></pre>

<p>連線的 <code>SSID</code> 就找 <code>Cell</code> 裡的 <code>ESSID</code></p>

<p>(通常應該會記得自己家的 AP 啦，可以用來確認一下)</p>

<p>開啟 <code>/etc/network/interfaces</code> 來寫入連線值</p>

<p>我的 AP 的加密機制是 WPA/WPA2，所以使用下面的方式連線</p>

<p>若是其他方式 (e.g. WEP) 可以參考 <a href="http://inpega.blogspot.tw/2013/09/blog-post_15.html">這篇</a></p>

<pre><code>$ vi /etc/network/interfaces
auto lo

iface lo inet loopback
iface eth0 inet dhcp

# 重點是下面這段

# 允許熱插拔 wlan0 這個介面
allow-hotplug wlan0 

# 預設設定為 dhcp
iface default inet dhcp

# 設定 wlan0 這張介面卡為 DHCP 自動取得 IP
iface wlan0 inet dhcp

# 你的 AP 的 SSID
wpa-ssid "GGININDER"

# 你的 AP 的密碼
wpa-psk "password"
</code></pre>

<p>設定好後，重新啟動 wlan0 介面就可以連線囉</p>

<pre><code>$ sudo ifdown wlan0
$ sudo ifup wlan0
$ ifconfig wlan0 # 確認是否取得 IP
</code></pre>

<p>reference:</p>

<p>raspberry pi forum: <a href="http://www.raspberrypi.org/forums/viewtopic.php?f=28&amp;t=62371&amp;start=475">http://www.raspberrypi.org/forums/viewtopic.php?f=28&amp;t=62371&amp;start=475</a></p>

<p>網路設定: <a href="http://inpega.blogspot.tw/2013/09/blog-post_15.html">http://inpega.blogspot.tw/2013/09/blog-post_15.html</a></p>
]]></content>
  </entry>
  
</feed>
