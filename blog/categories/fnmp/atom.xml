<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Fnmp | kerkerj]]></title>
  <link href="http://kerkerj.github.io/blog/categories/fnmp/atom.xml" rel="self"/>
  <link href="http://kerkerj.github.io/"/>
  <updated>2014-08-07T15:47:20+08:00</updated>
  <id>http://kerkerj.github.io/</id>
  <author>
    <name><![CDATA[kerkerj]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[FreeBSD] FNMP (Nginx)]]></title>
    <link href="http://kerkerj.github.io/blog/2010/12/16/freebsdnginxphpmysql/"/>
    <updated>2010-12-16T06:43:00+08:00</updated>
    <id>http://kerkerj.github.io/blog/2010/12/16/freebsdnginxphpmysql</id>
    <content type="html"><![CDATA[<p>就是網頁伺服器 Nginx
FreeBSD + Nginx + php + MySQL</p>

<p>我個人是直接把 apache 直接換成 Nginx
其他只是多安裝一些模組而已，因此換起來還好, 不過還是稍微會寫一些安裝上的順序。</p>

<h1>安装MySQL </h1>

<p>參閱 <a href="http://kerkerj.logdown.com/posts/2010/10/05/freebsd81-famp">此篇文章</a></p>

<h1>安裝PHP</h1>

<p>```</p>

<h1>cd /usr/ports/lang/php5</h1>

<h1>make config install clean</h1>

<p>```</p>

<p>將下面的模組勾一勾，沒有的選項就不管他了～
<code>
[X] CLI        Build CLI version
[X] CGI        Build CGI version
[X] FPM        必勾!!! Nginx處理php時是要交給他處理
[X] APACHE     Build Apache module
[ ] DEBUG      Enable debug
[X] SUHOSIN      Enable Suhosin protection system
[X] MULTIBYTE    Enable zend multibyte support
[ ] IPV6       Enable ipv6 support
[ ] REDIRECT   Enable force-cgi-redirect support (CGI only)
[ ] DISCARD    Enable discard-path support (CGI only)
[X] FASTCGI    Enable fastcgi support (CGI only)
[X] PATHINFO   Enable path-info-check support (CGI only)
</code></p>

<h1>安裝php5-entensions</h1>

<p>```</p>

<h1>cd /usr/ports/lang/php5-extensions/</h1>

<h1>make config install clean</h1>

<p>```</p>

<p>勾選需要的extension，下面必裝，其餘隨意。
<code>
[X] FTP        FTP support
[X] GD      
[X] GETTEXT
[X] MBSTRING
[X] MYSQL
[ ] POSIX //去掉.
[ ] SQLITE //去掉.
[X] ZLIB
</code></p>

<p>```</p>

<h1>cd /usr/local/etc</h1>

<h1>cp php.ini-development php.ini</h1>

<p>```
=>修改PHP設定檔</p>

<h1>安裝nginx</h1>

<p>```</p>

<h1>cd /usr/ports/www/nginx/</h1>

<h1>make install clean</h1>

<p>```
安裝nginx就是這麼簡單～</p>

<p>設定nginx的部份：
編輯 <code>/usr/local/etc/nginx/nginx.conf</code>
將<code>#user nobody;</code> 改成 <code>user www;</code>
找到下面的部份：
<code>
location / {
    root    /usr/local/www/nginx;  //網頁目錄可以換，看你網頁放哪 (ex./home/www)
    index    index.html index.htm;  //記得加入 index.php 等等
}
</code></p>

<p>下面是給 FPM 處理 PHP 的部份，記得先將前面的 # 註解刪掉，
然後將 <code>fastcgi_param</code> 的 <code>/scripts$fastcgi_script.name</code>
更改為: <code>/你的網頁目錄$fastcgi_script.name</code>
例如： <code>/home/www$fastcgi_script.name</code></p>

<p>```</p>

<h1>location ~ .php$ {</h1>

<h1>    fastcgi_pass    127.0.0.1:9000;</h1>

<h1>    fastcgi_index   index.php;</h1>

<h1>    fastcgi_param     SCRIPT_FILENAME    /scripts$fastcgi_script.name;</h1>

<h1>    include      fastcgi_params;</h1>

<h1>}</h1>

<p>```</p>

<p>安裝完後, 記得編輯 <code>/etc/rc.conf</code>, 加入:
<code>
mysql_enable="YES"
nginx_enable="YES"
php_fpm_enable="YES"
</code>
這樣就可以啦<del>~
如果有 phpmyadmin 的話，可以將該資料夾整個複製到網頁根目錄底下，就可以操作了</del></p>
]]></content>
  </entry>
  
</feed>
