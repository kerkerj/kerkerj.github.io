<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Swift | kerkerj]]></title>
  <link href="http://kerkerj.github.io/blog/categories/swift/atom.xml" rel="self"/>
  <link href="http://kerkerj.github.io/"/>
  <updated>2014-10-22T19:20:30+08:00</updated>
  <id>http://kerkerj.github.io/</id>
  <author>
    <name><![CDATA[kerkerj]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[[Swift-d22] - 實戰開發 - TODOList - Show View 1]]></title>
    <link href="http://kerkerj.github.io/blog/2014/10/22/swift-d22/"/>
    <updated>2014-10-22T19:13:04+08:00</updated>
    <id>http://kerkerj.github.io/blog/2014/10/22/swift-d22</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/kerkerj/ithome-SwiftTodoApp/tree/Day22">Github link</a></p>

<p>接著我們要讓主頁顯示一些假資料:</p>

<p>由於我們未來接的 api 的資料會是 todo_id + content</p>

<p>因此我們先產生一個 dictionary array 來存放我們的假資料</p>

<pre><code class="swift">var fakeData = [[String:String]]()
fakeData = [
    ["id": "1", "content": "A"],
    ["id": "2", "content": "B"],
    ["id": "3", "content": "C"],
]
</code></pre>

<p>再來對主頁的 controller 新增 tableView 上去</p>

<p>並且對 UITableView 加入 delegate 以及 datasource</p>

<pre><code>import UIKit

class ViewController: UIViewController, UITableViewDataSource, UITableViewDelegate {

    var fakeData = [[String:String]]()
    var tableView: UITableView?

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        fakeData = [["1": "A"], ["2": "B"], ["3": "C"]]
        self.view.backgroundColor = UIColor.yellowColor()

        self.tableView = UITableView(frame: self.view.frame)
        self.tableView?.delegate = self
        self.tableView?.dataSource = self

        self.view.addSubview(self.tableView!)
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }


}
</code></pre>

<p>此時編譯器就會要求實作 UITableViewDataSource, UITableViewDelegate 的 methods</p>

<p>實作完就可以讓 TableView 顯示資料, 這我們之前也都有提到過了~</p>

<p>在這邊我們也同時使用自訂的 CustomTableViewCell, 簡單對 cell 改個顏色，雖然沒什麼多大用處 XD</p>

<pre><code>    func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return self.fakeData.count
    }

    func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell {
        var cell: CustomTableViewCell? = tableView.dequeueReusableCellWithIdentifier("CustomCell") as? CustomTableViewCell

        if cell == nil {
            var objects = NSBundle.mainBundle().loadNibNamed("CustomTableViewCell", owner: self, options: nil)
            cell = objects[0] as? CustomTableViewCell
        }

        cell!.textLabel?.text = (self.fakeData[indexPath.row])["content"]

        return cell!
    }
</code></pre>

<p><img src="http://goo.gl/8Zis9p" alt="image" /></p>

<p>不過可以看到有小瑕疵，就是選取後他並不會回覆成原本的模樣</p>

<p>因此加入 tableView didSelectRowAtIndexPath:</p>

<pre><code>    func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {

        // 回復非選取狀態
        tableView.deselectRowAtIndexPath(indexPath, animated: true)
    }
</code></pre>

<p>明天就會提到換頁以及刪除的作法!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Swift-d21] - 實戰開發 - TODOList - 前置設定]]></title>
    <link href="http://kerkerj.github.io/blog/2014/10/21/swift-d21/"/>
    <updated>2014-10-21T18:58:10+08:00</updated>
    <id>http://kerkerj.github.io/blog/2014/10/21/swift-d21</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/kerkerj/ithome-SwiftTodoApp/tree/Day21">Github link</a></p>

<p>首先在開始寫這隻 app 前，</p>

<p>我們要先定義好程式大致上的流程</p>

<p>基本上接下來的程式碼都不會用到 storyboard</p>

<p>只會用到程式 + xib</p>

<p>程式的流程大致上是使用 Navigation controller 來控制 view 的轉換</p>

<p>第一頁 - tableView 顯示 todo items list</p>

<p><img src="http://goo.gl/RKH85d" alt="image" /></p>

<p>點進子項目可以觀看內容，進到子頁後可以編輯，</p>

<p>編輯後就即可存檔</p>

<p>新增項目則在主頁的右上角 &ldquo;Add&rdquo; 可以新增</p>

<p>我們會先從建立假的資料開始，也就是我會先刻出程式的流程</p>

<p>先不接 API</p>

<p>實際寫出運作流程後，再加上 API 操作的部分</p>

<p>因此今天的進度就先開一個新專案，將基本的 Navigation + tableView 建立起來吧:</p>

<p>首先建立一個新專案</p>

<p>再來到 project settings</p>

<p>將 Main Interface 及 Launch Screen file 拿掉</p>

<p>並將 deploy target 設成 7.1 (反正用到的程式碼都一樣~ 沒有特別使用 8.0 的 lib)</p>

<p>設定 device orientation - 只限定直的</p>

<p><img src="http://goo.gl/xQ6m25" alt="image" /></p>

<p>接著就來編輯 AppDelegate.swift</p>

<p>建立一個 NavigationController + ViewController</p>

<pre><code class="swift">@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?
    var navigationController: UINavigationController?
    var viewController: ViewController?

    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
        // Override point for customization after application launch.

        self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        self.window?.backgroundColor = UIColor.whiteColor()

        self.viewController = ViewController()
        self.viewController?.title = "TODO List"

        self.navigationController = UINavigationController(rootViewController: self.viewController!)

        self.window?.makeKeyAndVisible()
        self.window?.rootViewController = navigationController

        return true
    }
</code></pre>

<p>就是之前有用到的程式碼，稍作改寫</p>

<p>再來到 ViewController 中, 將背景色稍改一些</p>

<pre><code>override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        self.view.backgroundColor = UIColor.yellowColor()
    }
</code></pre>

<p>最後將 storyboard 以及 launchScreen.xib 刪掉</p>

<p>執行程式，就 OK 囉！</p>

<p><img src="http://goo.gl/n1T0zv" alt="image" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Swift-d20] - Basic - 捨棄 Storyboard 使用純程式碼 的方式撰寫 ViewController]]></title>
    <link href="http://kerkerj.github.io/blog/2014/10/20/swift-d20/"/>
    <updated>2014-10-20T18:46:16+08:00</updated>
    <id>http://kerkerj.github.io/blog/2014/10/20/swift-d20</id>
    <content type="html"><![CDATA[<p>今天專案的 <a href="https://github.com/kerkerj/ithome-NoStoryboardDemo">Github link</a></p>

<p>其實哦</p>

<p>寫 Swift 也有幾個禮拜了</p>

<p>我一直覺得使用 Interface Builder 的確很方便</p>

<p>但是在程式面與視覺面之間的溝通常常會漏東漏西的</p>

<p>比方說如果要設定 reusable identifier 時</p>

<p>除了程式裡面的字串要設定以外，還要再到 storyboard 裡設定同樣的字串</p>

<p>一個簡單的小程式可能不超過 20 個 View 的情況下</p>

<p>還可以這樣做，當程式長得非常大的時候，好像就很難注意到這件事，</p>

<p>而且 View 太多 storyboard 就會開始變慢&hellip;.</p>

<p>因此今天要來試著在 Swift 中</p>

<p>如何不用 Storyboard，來打造我們的程式</p>

<p>(當然 xib/nib 還是會用到，只是我們單純捨棄 storyboard，用程式來控制流程)</p>

<p>首先，一樣先建立一個測試專案</p>

<p>接著我們要動到的程式碼是 AppDelegate.swift:</p>

<p>編輯它:</p>

<pre><code class="swift">@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?
    var viewController: ViewController?

    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
        // Override point for customization after application launch.

        self.viewController = ViewController()
        self.viewController?.view.backgroundColor = UIColor.redColor()

        self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        self.window?.backgroundColor = UIColor.whiteColor()

        self.window?.rootViewController = viewController
        self.window?.makeKeyAndVisible()

        return true
    }
</code></pre>

<p>其實這段程式碼，就是在做 storyboard 的 &ldquo;進入點&rdquo; 這件事</p>

<pre><code>var viewController: ViewController?
</code></pre>

<p>我們用專案建立時產生的 ViewController 建立了一個物件</p>

<p>並在 application launch 的時候，將該 ViewController 建立起來，設定他的背景顏色為紅色</p>

<pre><code>self.viewController = ViewController()
self.viewController?.view.backgroundColor = UIColor.redColor()
</code></pre>

<p>另外對 window 做一些設定</p>

<pre><code>self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        self.window?.backgroundColor = UIColor.whiteColor()
</code></pre>

<p>設定他 Screen 大小 (根據手機解析度而定)
並設定 window 的背景顏色為白色</p>

<p>接著是最重要的設定:</p>

<pre><code>self.window?.rootViewController = viewController
self.window?.makeKeyAndVisible()
</code></pre>

<p>我們要讓 viewController 指定為是這個 window 的 rootViewController</p>

<p>並且 makeKeyAndVisible</p>

<p>這樣就完成手動設定進入點的程式了</p>

<p>再來我們就可以大膽一點，把 Storyboard 砍掉啦!</p>

<p>接著執行程式，就可以看到一片紅色了!!!</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-18%2015.10.21.png" alt="image" /></p>

<p>是不是很簡單!</p>

<p>如果要 NavigationController 也可以直接設定!</p>

<p>接下來的實戰開發專案就會以不使用 Storyboard 的方式開發</p>

<p>增加程式碼可讀性 :P</p>

<p>老是貼圖也很累 XDDDD</p>

<p>接下來就要用 Swift 寫一個 TODOList APP 囉!</p>

<p>並且實際接上隔壁棚的 Restful API XD</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Swift-d19] - Basic - 橋接第三方 Objc Library - Reachability and Bridge.h]]></title>
    <link href="http://kerkerj.github.io/blog/2014/10/19/swift-d19/"/>
    <updated>2014-10-19T21:19:28+08:00</updated>
    <id>http://kerkerj.github.io/blog/2014/10/19/swift-d19</id>
    <content type="html"><![CDATA[<p>本日專案的 <a href="https://github.com/kerkerj/ithome-BridgeObjcDemo">Github link</a></p>

<p>由於 Swift 剛推出不到一年</p>

<p>有許多的 third-party library 一定還沒轉換成 Swift</p>

<p>或者是作者沒心力轉會成 Swift</p>

<p>但是有些套件非常方便，那在 Swift 要怎麼使用 Objective-C 的套件呢?</p>

<p>Xcode 有提供橋接的方式，非常好用</p>

<p>接下來就介紹一下如何使用吧!</p>

<p>以下的例子是一個叫做 <code>Reachability</code> 的套件</p>

<p>它可以簡單地幫我們判斷是否有網路連線 3g or wifi 之類的</p>

<p>所以我們先下載這個套件吧!</p>

<p><a href="https://github.com/tonymillion/Reachability">https://github.com/tonymillion/Reachability</a></p>

<p>下載解壓縮後</p>

<p>將 .h 和 .m 檔拖曳進 Xcode 專案中</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-18%2014.27.17.png" alt="image" /></p>

<p>接下來 Xcode 就會問一個非常重要的問題!:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-18%2014.26.24.png" alt="image" /></p>

<p>是否要建立橋接的 .h 檔案!</p>

<p>當然是選擇建立囉~</p>

<p>此時的專案結構就會變成這樣:</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-18%2014.26.38.png" alt="image" /></p>

<p>再來編輯 bridge-header.h 檔</p>

<p>將想要橋接的 objc 套件 import 進去</p>

<pre><code class="swift">#import "Reachability.h"
</code></pre>

<p>這樣我們就可以在 Swift 中直接使用該套件的類別與方法了!</p>

<p>接下來就讓我們試試看!</p>

<p>在 ViewController 中加入以下程式碼:</p>

<pre><code>//
//  ViewController.swift
//  BridgeObjcDemo
//
//  Created by Jerry Huang on 2014/10/18.
//  Copyright (c) 2014年 kerkerj. All rights reserved.
//

import UIKit

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.


        var isConnected = checkNetworkConnection()

        let alert = UIAlertView()
        alert.title = "Network Connection"

        if isConnected {
            alert.message = "You're online!"
        } else {
            alert.message = "You're offline!"
        }

        alert.addButtonWithTitle("OK")
        alert.show()
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }

    func checkNetworkConnection() -&gt; Bool {
        let reachability: Reachability = Reachability.reachabilityForInternetConnection()
        let networkStatus: NetworkStatus = reachability.currentReachabilityStatus()

        println(networkStatus.toRaw())

        switch (networkStatus.toRaw()) {
        case 0:
            println("[Network Status]: NotReachable")
        case 1:
            println("[Network Status]: ReachableViaWWAN")
        case 2:
            println("[Network Status]: ReachableViaWiFi")
        default:
            break
        }

        return networkStatus.toRaw() != 0
    }
}
</code></pre>

<p>簡單的說，我們寫了一個方法，使用 Reachability 偵測網路連線</p>

<p>在 ViewDidLoad 時，偵測是否有網路連線</p>

<p>跳一個 Alert 會告訴你是有連線還是沒有連線</p>

<p><img src="https://dl.dropboxusercontent.com/u/12400343/images/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202014-10-18%2014.42.45.png" alt="image" /></p>

<p>不過在這邊，我不曉得如何讓模擬器關掉連線，</p>

<p>所以沒辦法提供 offline 的圖</p>

<p>但是我實際安裝到手機後，將 wifi 功能關掉後的確是有跳出 offline 的</p>

<p>哈哈 雖然說沒圖沒真相但是&hellip;XD</p>

<p>橋接第三方套件就是那麼簡單! :D</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swift - Push/Pop Views Delay]]></title>
    <link href="http://kerkerj.github.io/blog/2014/10/19/swift-push-slash-pop-views-delay/"/>
    <updated>2014-10-19T00:33:11+08:00</updated>
    <id>http://kerkerj.github.io/blog/2014/10/19/swift-push-slash-pop-views-delay</id>
    <content type="html"><![CDATA[<p>請大家先看看下面的小短片，注意一下過場動畫的流暢度</p>

<p>一開始是沒有加過場動畫，後來改程式碼變成有過場動畫</p>

<p><a href="http://www.youtube.com/watch?feature=player_embedded&v=dqxDFv-iieU
" target="_blank"><img src="http://img.youtube.com/vi/dqxDFv-iieU/0.jpg"
alt="IMAGE ALT TEXT HERE" width="420" height="315" border="10" /></a></p>

<p><a href="https://www.youtube.com/watch?v=dqxDFv-iieU">direct link</a></p>

<p>後來發現給一個預設的 backgroundColor 後就不會發生殘影的問題了</p>

<p>是因為 push 的 view 沒有 backgroundColor</p>

<p>和同事討論後發現:</p>

<p><a href="https://developer.apple.com/library/IOs/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/occ/instp/UIView/backgroundColor">Apple Developer Reference</a></p>

<p>UIView 的 backgroundColor 的 default 值是 null!</p>

<blockquote><p>Discussion
Changes to this property can be animated. The default value is nil, which results in a transparent background color.</p></blockquote>

<p>所以是這個原因導致在轉場的時候有殘影</p>

<p>不過切換 View 時 target view 沒有 backgroundColor 的情況應該比較少吧&hellip;(?)</p>

<p>剛好在寫鐵人賽的 app 想先把流程弄出來時遇到了這個雷 XD</p>
]]></content>
  </entry>
  
</feed>
